import { useOutletContext, useSearchParams } from "react-router-dom";
import { Link } from 'react-router-dom';
import { useState, useEffect, useRef } from "react";
import { colorVariants } from "../components/AdminQuestionDetail";




function Home() {

    const { setIsAdmin } = useOutletContext();
    const [isLoading, setIsLoading] = useState(true);
    const [error, setError] = useState();
    const [questionsList, setQuestionsList] = useState();
    const [searchParams, setSearchParams] = useSearchParams("?page=0&limit=10");
    const prevNextButtonLoadingRef = useRef(false);

    useEffect(() => {
        const controller = new AbortController();
        async function questionsListfetcher() {
            try {
                const page = searchParams.get("page") ?? "0";
                const limit = searchParams.get("limit") ?? "10";

                let res = await fetch(`/docs/questions?page=${page}&limit=${limit}`, {
                    method: "GET",
                    credentials: 'include',
                    signal: controller.signal,
                })


                if (res.ok) {
                    const questionsList = await res.json();
                    setIsLoading(false);
                    setQuestionsList(questionsList);
                } else {
                    // don't need Error handling as it's a developer error
                    setError(new Error(`Request failed with status: ${res.status}`));
                    return;
                }

            } catch (err) {
                if (err.name === "AbortError") {
                    return;
                } else {
                    // user's network error. So need error handler
                    setError(err);
                    return;

                }

            }
        }
        prevNextButtonLoadingRef.current = false;
        questionsListfetcher();
        setIsAdmin(false);

        return () => {
            controller.abort();
        }

    }, [searchParams]);

    function handleOnChange(e) {
        prevNextButtonLoadingRef.current = true;
        const page = e.currentTarget.value.toString();
        const limit = searchParams.get("limit") ?? "10";
        setSearchParams([["page", page], ["limit", limit]]);
    }

    if (error) {
        throw error;
    }

    if (isLoading) {
        <div className="text-center">
            loading...
        </div>
    } else {
        return (
            <div className="flex flex-col md:justify-center items-center pb-80 overflow-y-auto md:overflow-clip">
                <div className="mt-10 md:mt-10 md:mb-10">
                    <svg className="w-13 md:w-25" viewBox="0 0 21 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M11.4999 19.5004H19.4999" stroke="black" strokeLinecap="round" strokeLinejoin="round" />
                        <path d="M13.4999 3.50038L17.4999 7.50038" stroke="black" strokeLinecap="round" strokeLinejoin="round" />
                        <path d="M19.6739 5.31238C20.2026 4.7838 20.4997 4.06685 20.4998 3.31923C20.4999 2.57162 20.203 1.85459 19.6744 1.32588C19.1459 0.797172 18.4289 0.500094 17.6813 0.5C16.9337 0.499906 16.2166 0.796805 15.6879 1.32538L2.34193 14.6744C2.10975 14.9059 1.93805 15.1909 1.84193 15.5044L0.520934 19.8564C0.49509 19.9429 0.493138 20.0347 0.515286 20.1222C0.537433 20.2097 0.582855 20.2896 0.646731 20.3534C0.710607 20.4172 0.790555 20.4624 0.878093 20.4845C0.965631 20.5065 1.05749 20.5044 1.14393 20.4784L5.49693 19.1584C5.8101 19.0631 6.09511 18.8925 6.32693 18.6614L19.6739 5.31238Z" stroke="black" strokeLinecap="round" strokeLinejoin="round" />
                    </svg>
                </div>
                <div className="relative -top-30 right-0 w-40 md:w-0 md:right-0 md:top-0">

                    <div className="absolute -left-2 top-154 w-full md:w-0 md:left-100 md:top-0">
                        <svg className="md:w-[250px] md:h-[250px]" viewBox="0 0 56 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path strokeWidth="0.5" d="M30.5 13.2326C30.5 13.7067 30.1745 15.7112 29.8433 17.0214C29.6597 17.7474 29.2967 18.6894 29.0214 19.461C28.7404 20.2482 28.2545 20.9708 26.3436 22.9562C25.5491 23.7816 23.9904 24.2576 22.9137 24.9767C22.1955 25.4563 21.0282 25.7435 20.1192 26.1707C19.7099 26.434 19.3236 26.7012 18.9956 26.9128C18.8304 27.0194 18.6677 27.1244 18.5 27.2326" stroke="black" strokeLinecap="round" />
                            <path strokeWidth="0.5" d="M30.8827 14.2326C30.8306 14.5349 30.725 15.141 30.5941 16.3007C30.2128 19.6803 31.0908 20.3055 31.4329 20.9389C31.8979 21.7998 33.2381 22.8817 34.1912 23.6739C34.8265 24.2019 35.4517 24.7106 36.0831 25.0167C36.6777 25.3049 37.4477 25.4215 38.1327 25.5992C38.8682 25.7253 39.6045 25.9789 39.9978 26.08C40.1831 26.1308 40.3392 26.181 40.5 26.2326" stroke="black" strokeLinecap="round" />
                            <path strokeWidth="0.5" d="M15.5 32.2326C15.2736 32.4966 15.0472 33.455 14.5094 34.1502C14.0362 34.7618 13.6311 35.535 13.0906 36.2302C12.5562 36.9177 11.9289 37.5094 11.4166 38.1502C10.9315 38.757 10.2268 39.1638 9.54511 39.5382C8.8634 39.6454 8.40894 39.911 8.12638 40.151C7.95617 40.2326 7.73149 40.2326 7.5 40.2326" stroke="black" strokeLinecap="round" />
                            <path strokeWidth="0.5" d="M15.2143 33.2326C14.9009 33.5895 14.6479 34.408 14.5224 35.1018C14.3774 35.9032 14.9613 36.6141 15.5578 37.1026C16.1682 37.6024 16.5319 38.2049 17.288 38.488C18.044 38.8218 18.9218 38.9249 19.8987 39.078C20.1206 39.1295 20.3074 39.1803 20.5 39.2326" stroke="black" strokeLinecap="round" />
                            <path strokeWidth="0.5" d="M43.5 32.2326C43.5 32.9372 43.3969 34.5609 43.0586 35.5264C42.8266 36.1887 42.7187 36.7948 42.3562 37.4293C41.8788 38.2652 41.2125 38.6726 40.1445 39.0538C39.9078 39.1307 39.7531 39.1809 39.493 39.2067C39.2328 39.2326 38.8719 39.2326 38.5 39.2326" stroke="black" strokeLinecap="round" />
                            <path strokeWidth="0.5" d="M43.5665 33.2326C43.5665 34.138 43.4638 35.9687 43.5136 37.0834C43.5554 38.0199 44.6523 38.2026 45.5336 38.911C46.127 39.388 47.0355 39.4717 47.7643 39.598C48.4327 39.7139 49.1635 39.7761 49.8122 40.0538C49.9942 40.1307 50.1995 40.1809 50.485 40.2067C50.7704 40.2326 51.1298 40.2326 51.5 40.2326" stroke="black" strokeLinecap="round" />
                            <path strokeWidth="0.5" d="M0.5 36.2326C0.5 35.6687 0.604211 34.5315 0.736053 33.8087C0.955082 32.608 1.28947 31.9504 1.83974 30.8658C2.31141 29.9362 2.81158 28.6473 4.57211 26.8656C5.39518 26.0326 6.18105 25.8027 6.94447 25.5432C7.13 25.4913 7.28632 25.4402 7.67947 25.4139C8.07263 25.3875 8.69789 25.3875 9.5 25.2326" stroke="black" strokeLinecap="round" />
                            <path strokeWidth="0.5" d="M3.5 23.2326C4.18943 23.4261 5.03844 23.5235 6.1819 23.789C7.19533 24.0242 7.75306 24.3962 8.2047 24.4682C8.40586 24.5003 8.49834 24.6842 8.49994 24.9504C8.50784 26.2684 7.75785 27.0115 7.43787 27.6181C6.94218 28.5577 6.21621 29.4842 6.00077 30.1148C5.9481 30.309 5.84277 30.549 5.76218 30.7446C5.68159 30.9402 5.62892 31.0842 5.57466 31.2326" stroke="black" strokeLinecap="round" />
                            <path strokeWidth="0.5" d="M22.5 28.3163C22.555 28.6809 22.8867 29.7243 23.4425 30.6703C23.9032 31.4544 24.11 32.2418 24.6367 33.7056C25.0361 34.8157 25.2767 35.6455 25.3608 36.9804C25.3883 37.2719 25.4433 37.4275 25.4717 37.7928C25.5 38.1582 25.5 38.7286 25.5 39.3163" stroke="black" strokeLinecap="round" />
                            <path strokeWidth="0.5" d="M21.5 35.1733C21.8122 35.1733 23.0592 36.1161 24.3196 37.7866C24.5817 38.1339 24.8412 38.3953 25.1816 38.2945C27.0792 37.7326 27.4043 35.6018 28.2161 34.5948C28.8192 33.9051 29.1329 33.3766 29.3157 32.9806C29.3949 32.7941 29.4467 32.637 29.5 32.3163" stroke="black" strokeLinecap="round" />
                            <path strokeWidth="0.5" d="M27.2077 41.6837C27.7362 41.567 28.4414 41.0968 29.1201 40.449C29.7479 39.8499 29.9756 39.0359 30.505 38.328C30.9645 37.7135 30.9195 34.6983 30.7145 32.8486C30.6258 32.0484 30.0958 31.2021 29.684 30.3741C29.2962 29.5944 28.802 28.6675 28.0941 27.4594C27.5739 26.5716 26.8577 26.0728 26.3849 25.3666C25.6189 24.2227 24.3266 23.6017 23.3809 22.7736C22.6532 22.1364 22.202 21.1837 21.4959 20.5059C20.3294 19.3861 19.9042 18.5324 19.1097 17.5603C18.5274 16.8478 17.3766 15.6513 16.1959 14.2638C13.8015 11.45 13.1875 10.5219 12.5981 9.51798C12.1253 8.7128 12.1836 6.52731 12.3886 5.06909C12.5227 4.1156 13.4173 3.3917 14.1252 2.53532C14.6218 1.93459 15.5384 1.97413 18.3002 1.9432C19.4738 1.93005 20.2506 2.73771 21.1653 3.032C22.0309 3.31047 22.6085 3.79823 23.3164 4.32761C24.0827 4.62367 24.7313 4.85875 25.1131 5.03551C25.3199 5.0956 25.5532 5.0956 25.7936 5.0956" stroke="black" strokeLinecap="round" />
                            <path strokeWidth="0.5" d="M25.2634 0.5C25.2634 1.60648 25.38 4.5618 25.4993 5.21137C24.62 5.44911 23.0893 5.56577 20.0606 5.65503C19.4323 5.68419 19.2573 5.74252 18.9002 5.80262" stroke="black" strokeLinecap="round" />
                            <path strokeWidth="0.5" d="M30.5 5.81635C32.433 5.81635 34 7.38335 34 9.31635C34 11.2493 32.433 12.8163 30.5 12.8163C28.567 12.8163 27 11.2493 27 9.31635C27 7.38335 28.567 5.81635 30.5 5.81635Z" stroke="black" />
                            <path strokeWidth="0.5" d="M51.5 39.8163C53.433 39.8163 55 41.3834 55 43.3163C55 45.2493 53.433 46.8163 51.5 46.8163C49.567 46.8163 48 45.2493 48 43.3163C48 41.3834 49.567 39.8163 51.5 39.8163Z" stroke="black" />
                            <path strokeWidth="0.5" d="M37.5 39.8163C39.433 39.8163 41 41.3834 41 43.3163C41 45.2493 39.433 46.8163 37.5 46.8163C35.567 46.8163 34 45.2493 34 43.3163C34 41.3834 35.567 39.8163 37.5 39.8163Z" stroke="black" />
                            <path strokeWidth="0.5" d="M5.5 39.8163C7.433 39.8163 9 41.3834 9 43.3163C9 45.2493 7.433 46.8163 5.5 46.8163C3.567 46.8163 2 45.2493 2 43.3163C2 41.3834 3.567 39.8163 5.5 39.8163Z" stroke="black" />
                            <path strokeWidth="0.5" d="M21.5 39.8163C23.433 39.8163 25 41.3834 25 43.3163C25 45.2493 23.433 46.8163 21.5 46.8163C19.567 46.8163 18 45.2493 18 43.3163C18 41.3834 19.567 39.8163 21.5 39.8163Z" stroke="black" />
                            <path strokeWidth="0.5" d="M43.5 25.8163C45.433 25.8163 47 27.3834 47 29.3163C47 31.2493 45.433 32.8163 43.5 32.8163C41.567 32.8163 40 31.2493 40 29.3163C40 27.3834 41.567 25.8163 43.5 25.8163Z" stroke="black" />
                            <path strokeWidth="0.5" d="M15.5 25.8163C17.433 25.8163 19 27.3834 19 29.3163C19 31.2493 17.433 32.8163 15.5 32.8163C13.567 32.8163 12 31.2493 12 29.3163C12 27.3834 13.567 25.8163 15.5 25.8163Z" stroke="black" />
                        </svg>

                    </div>
                    <div className="absolute right-30 top-190 w-13 md:w-0 md:left-100 md:top-61">
                        <svg className="w-full md:w-[70px]" viewBox="0 0 39 31" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path strokeWidth="0.5" d="M0.5 0.5C0.5 0.867539 0.5 3.17023 0.568914 6.55604C0.616288 8.8836 1.05688 10.237 1.37987 11.4698C1.90362 13.4688 2.44629 14.2771 3.02683 15.6234C3.53407 16.7997 4.39257 18.1252 5.29959 19.106C6.53785 20.445 7.96773 21.3328 8.64155 21.7992C9.53127 22.415 10.8412 22.6804 14.8466 24.3002C17.1343 25.2254 18.5456 25.2337 19.431 25.304C20.3626 25.378 21.5639 25.604 22.7702 25.7446C24.9901 25.9771 27.7842 26.069 29.5801 26.2082C31.1004 26.2556 33.857 26.2556 36.697 26.2556" stroke="black" strokeLinecap="round" />
                            <path strokeWidth="0.5" d="M33.0773 22.3574C34.4681 23.4239 34.9317 23.8861 35.5575 24.4207C36.218 24.9849 37.2038 25.3729 37.6479 25.6507C38.4224 26.135 36.5606 26.857 34.8016 27.7139C33.637 28.2965 32.2504 29.0344 31.1777 29.5955C30.9904 29.6887 30.8526 29.7806 30.5714 30.0145" stroke="black" strokeLinecap="round" />
                        </svg>

                    </div>
                    <div className="absolute left-12 top-196 w-15 md:w-0 md:left-120 md:top-70">
                        <svg className="md:w-25" viewBox="0 0 27 9" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M2.544 9C2.024 9 1.572 8.9 1.188 8.7C0.812001 8.5 0.520001 8.212 0.312001 7.836C0.104001 7.46 8.04663e-07 7.02 8.04663e-07 6.516V2.484C8.04663e-07 1.972 0.104001 1.532 0.312001 1.164C0.520001 0.788001 0.812001 0.5 1.188 0.300001C1.572 0.100001 2.024 9.53674e-07 2.544 9.53674e-07C3.056 9.53674e-07 3.5 0.104001 3.876 0.312001C4.26 0.512001 4.556 0.800001 4.764 1.176C4.972 1.552 5.076 2 5.076 2.52H4.128C4.128 1.992 3.988 1.584 3.708 1.296C3.428 1 3.04 0.852001 2.544 0.852001C2.048 0.852001 1.656 0.996001 1.368 1.284C1.088 1.564 0.948001 1.964 0.948001 2.484V6.516C0.948001 7.028 1.088 7.428 1.368 7.716C1.656 8.004 2.048 8.148 2.544 8.148C3.04 8.148 3.428 8.004 3.708 7.716C3.988 7.42 4.128 7.008 4.128 6.48H5.076C5.076 6.992 4.972 7.44 4.764 7.824C4.556 8.2 4.26 8.492 3.876 8.7C3.5 8.9 3.056 9 2.544 9ZM9.67931 8.988C9.16731 8.988 8.72331 8.888 8.34731 8.688C7.97131 8.488 7.67931 8.2 7.47131 7.824C7.26331 7.448 7.15931 7.004 7.15931 6.492V4.668C7.15931 4.148 7.26331 3.704 7.47131 3.336C7.67931 2.96 7.97131 2.672 8.34731 2.472C8.72331 2.272 9.16731 2.172 9.67931 2.172C10.1913 2.172 10.6353 2.272 11.0113 2.472C11.3873 2.672 11.6793 2.96 11.8873 3.336C12.0953 3.704 12.1993 4.144 12.1993 4.656V6.492C12.1993 7.004 12.0953 7.448 11.8873 7.824C11.6793 8.2 11.3873 8.488 11.0113 8.688C10.6353 8.888 10.1913 8.988 9.67931 8.988ZM9.67931 8.136C10.1753 8.136 10.5593 7.996 10.8313 7.716C11.1033 7.436 11.2393 7.028 11.2393 6.492V4.668C11.2393 4.132 11.0993 3.724 10.8193 3.444C10.5473 3.164 10.1673 3.024 9.67931 3.024C9.19131 3.024 8.80731 3.164 8.52731 3.444C8.25531 3.724 8.11931 4.132 8.11931 4.668V6.492C8.11931 7.028 8.25531 7.436 8.52731 7.716C8.80731 7.996 9.19131 8.136 9.67931 8.136ZM16.5506 9C15.8946 9 15.3626 8.78 14.9546 8.34C14.5546 7.9 14.3546 7.308 14.3546 6.564V4.608C14.3546 3.856 14.5546 3.26 14.9546 2.82C15.3546 2.38 15.8866 2.16 16.5506 2.16C17.1026 2.16 17.5466 2.312 17.8826 2.616C18.2266 2.92 18.3986 3.328 18.3986 3.84L18.1466 3.444H18.3746L18.3626 2.004V0.120001H19.3106V8.88H18.3626V7.716H18.1106L18.3986 7.32C18.3986 7.84 18.2266 8.252 17.8826 8.556C17.5466 8.852 17.1026 9 16.5506 9ZM16.8506 8.172C17.3226 8.172 17.6906 8.028 17.9546 7.74C18.2266 7.444 18.3626 7.036 18.3626 6.516V4.644C18.3626 4.124 18.2266 3.72 17.9546 3.432C17.6906 3.136 17.3226 2.988 16.8506 2.988C16.3706 2.988 15.9946 3.132 15.7226 3.42C15.4506 3.708 15.3146 4.116 15.3146 4.644V6.516C15.3146 7.044 15.4506 7.452 15.7226 7.74C15.9946 8.028 16.3706 8.172 16.8506 8.172ZM24.0699 9C23.5579 9 23.1139 8.9 22.7379 8.7C22.3619 8.492 22.0699 8.2 21.8619 7.824C21.6539 7.448 21.5499 7.012 21.5499 6.516V4.644C21.5499 4.14 21.6539 3.704 21.8619 3.336C22.0699 2.96 22.3619 2.672 22.7379 2.472C23.1139 2.264 23.5579 2.16 24.0699 2.16C24.5819 2.16 25.0259 2.264 25.4019 2.472C25.7779 2.672 26.0699 2.96 26.2779 3.336C26.4859 3.704 26.5899 4.14 26.5899 4.644V5.808H22.4859V6.516C22.4859 7.052 22.6219 7.468 22.8939 7.764C23.1739 8.052 23.5659 8.196 24.0699 8.196C24.4939 8.196 24.8379 8.112 25.1019 7.944C25.3739 7.776 25.5459 7.532 25.6179 7.212H26.5659C26.4779 7.764 26.2099 8.2 25.7619 8.52C25.3139 8.84 24.7499 9 24.0699 9ZM25.6539 5.172V4.644C25.6539 4.108 25.5179 3.696 25.2459 3.408C24.9739 3.112 24.5819 2.964 24.0699 2.964C23.5659 2.964 23.1739 3.112 22.8939 3.408C22.6219 3.696 22.4859 4.108 22.4859 4.644V5.064H25.7499L25.6539 5.172Z" fill="black" />
                        </svg>

                    </div>
                    <div className="absolute top-165 left-26 w-25 md:w-0 md:left-145 md:top-26">
                        <svg className="md:w-35" viewBox="0 0 94 132" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path strokeWidth="0.5" d="M8.43938 130.989C8.5334 130.989 8.62742 130.989 10.9323 130.989C13.2373 130.989 17.7502 130.989 26.0454 129.438C34.3405 127.886 46.2811 124.784 53.1845 122.903C61.6325 120.602 63.8002 119.501 65.1265 118.79C66.4157 118.099 67.6949 117.507 69.3018 116.561C71.7749 115.105 75.8434 112.866 80.9575 109.034C83.7431 106.946 86.4477 103.979 88.0888 101.727C90.6487 98.214 91.0576 95.1016 91.9123 92.875C92.6836 90.8657 92.3909 88.7367 92.6758 84.3975C92.8986 81.0045 92.7727 75.1693 91.9265 70.2389C91.0804 65.3086 89.388 61.4538 88.1401 58.9978C86.3547 55.4841 84.7069 53.1287 82.1114 48.875C80.3595 46.0039 76.9773 42.1767 73.2151 38.6382C69.4528 35.0996 65.2219 32.0909 62.1962 30.1649C57.6195 27.2517 53.948 25.4896 50.3952 23.2616C47.1082 21.2003 43.5004 19.6005 38.8678 16.9038C35.9877 15.2273 31.7906 13.361 29.1424 12.2028C23.7459 9.84277 20.6107 8.76821 17.8514 7.43768C15.2829 6.67412 13.0093 6.10715 6.80258 4.96751C5.31392 4.77377 4.46774 4.77377 3.311 4.48886" stroke="black" strokeLinecap="round" />
                            <path strokeWidth="0.5" d="M6.72993 0.500126C5.8809 0.876207 3.60731 2.20389 2.08162 3.06147C1.71064 3.26999 1.23117 3.4404 0.894971 3.6783C0.558778 3.9162 0.370737 4.19826 0.602939 4.90768C1.49328 6.74535 2.35941 8.18984 2.69133 8.80525C2.83521 9.13859 2.92923 9.51468 3.59592 10.472" stroke="black" strokeLinecap="round" />
                        </svg>

                    </div>
                    <div className="absolute top-205 left-18 w-4 md:w-0 md:left-130 md:top-80">
                        <svg className="md:w-5" viewBox="0 0 18 72" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path strokeWidth="0.5" d="M9.90482 0.5V64.5251" stroke="black" strokeLinecap="round" />
                            <path strokeWidth="0.5" d="M0.500002 61.993C5.79564 67.6504 8.68943 70.3054 9.9012 70.8589C11.3445 65.7477 13.9923 60.5642 15.98 57.5529C16.7739 56.3321 17.1321 55.7352 17.501 55.1203" stroke="black" strokeLinecap="round" />
                        </svg>

                    </div>
                    <div className="absolute top-225 left-11 w-18 md:w-0 md:left-120 md:top-105">
                        <svg className="md:w-25" viewBox="0 0 42 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M2.748 9.408C2.188 9.408 1.704 9.312 1.296 9.12C0.888 8.928 0.572 8.656 0.348 8.304C0.124 7.944 0.00800043 7.516 4.17233e-07 7.02H0.96C0.96 7.492 1.12 7.868 1.44 8.148C1.76 8.42 2.196 8.556 2.748 8.556C3.276 8.556 3.688 8.424 3.984 8.16C4.288 7.896 4.44 7.532 4.44 7.068C4.44 6.684 4.336 6.352 4.128 6.072C3.92 5.784 3.628 5.584 3.252 5.472L2.112 5.112C1.512 4.936 1.048 4.636 0.72 4.212C0.4 3.78 0.24 3.276 0.24 2.7C0.24 2.228 0.344 1.824 0.552 1.488C0.76 1.144 1.052 0.876002 1.428 0.684002C1.812 0.492002 2.26 0.396001 2.772 0.396001C3.532 0.396001 4.14 0.608001 4.596 1.032C5.052 1.456 5.28 2.024 5.28 2.736H4.332C4.332 2.28 4.192 1.92 3.912 1.656C3.632 1.392 3.248 1.26 2.76 1.26C2.272 1.26 1.888 1.38 1.608 1.62C1.336 1.852 1.2 2.184 1.2 2.616C1.2 2.992 1.304 3.32 1.512 3.6C1.72 3.88 2.012 4.08 2.388 4.2L3.528 4.56C4.12 4.744 4.58 5.056 4.908 5.496C5.236 5.936 5.4 6.452 5.4 7.044C5.4 7.516 5.288 7.932 5.064 8.292C4.848 8.644 4.54 8.92 4.14 9.12C3.748 9.312 3.284 9.408 2.748 9.408ZM9.88331 9.408C9.13931 9.408 8.54331 9.184 8.09531 8.736C7.65531 8.288 7.43531 7.68 7.43531 6.912V2.688H8.38331V6.912C8.38331 7.432 8.51531 7.84 8.77931 8.136C9.05131 8.424 9.41931 8.568 9.88331 8.568C10.3553 8.568 10.7273 8.424 10.9993 8.136C11.2713 7.84 11.4073 7.432 11.4073 6.912V2.688H12.3553V6.912C12.3553 7.68 12.1313 8.288 11.6833 8.736C11.2353 9.184 10.6353 9.408 9.88331 9.408ZM17.4146 9.408C16.8626 9.408 16.4146 9.26 16.0706 8.964C15.7346 8.66 15.5666 8.248 15.5666 7.728L15.8546 8.124H15.6026V9.288H14.6546V0.528002H15.6026V2.412L15.5906 3.852H15.8186L15.5666 4.248C15.5666 3.736 15.7386 3.328 16.0826 3.024C16.4266 2.72 16.8706 2.568 17.4146 2.568C18.0786 2.568 18.6106 2.788 19.0106 3.228C19.4106 3.668 19.6106 4.264 19.6106 5.016V6.972C19.6106 7.716 19.4106 8.308 19.0106 8.748C18.6106 9.188 18.0786 9.408 17.4146 9.408ZM17.1146 8.58C17.5946 8.58 17.9706 8.436 18.2426 8.148C18.5146 7.86 18.6506 7.452 18.6506 6.924V5.052C18.6506 4.524 18.5146 4.116 18.2426 3.828C17.9706 3.54 17.5946 3.396 17.1146 3.396C16.6506 3.396 16.2826 3.544 16.0106 3.84C15.7386 4.128 15.6026 4.532 15.6026 5.052V6.924C15.6026 7.444 15.7386 7.852 16.0106 8.148C16.2826 8.436 16.6506 8.58 17.1146 8.58ZM21.5139 9.288V2.688H22.3539V3.504H22.5339L22.4019 3.768C22.4019 3.4 22.4979 3.108 22.6899 2.892C22.8899 2.676 23.1619 2.568 23.5059 2.568C23.8659 2.568 24.1459 2.696 24.3459 2.952C24.5539 3.208 24.6619 3.568 24.6699 4.032L24.4179 3.504H24.8139L24.6459 3.768C24.6459 3.4 24.7459 3.108 24.9459 2.892C25.1459 2.676 25.4179 2.568 25.7619 2.568C26.1699 2.568 26.4859 2.72 26.7099 3.024C26.9419 3.328 27.0579 3.732 27.0579 4.236V9.288H26.1699V4.236C26.1699 3.948 26.1059 3.724 25.9779 3.564C25.8499 3.396 25.6699 3.312 25.4379 3.312C25.2059 3.312 25.0219 3.396 24.8859 3.564C24.7499 3.724 24.6819 3.948 24.6819 4.236V9.288H23.8899V4.236C23.8899 3.94 23.8219 3.712 23.6859 3.552C23.5579 3.392 23.3779 3.312 23.1459 3.312C22.9139 3.312 22.7339 3.392 22.6059 3.552C22.4779 3.712 22.4099 3.94 22.4019 4.236V9.288H21.5139ZM28.9373 9.288V8.424H31.2893V3.552H29.2373V2.688H32.2493V8.424H34.4813V9.288H28.9373ZM31.6613 1.476C31.4133 1.476 31.2133 1.412 31.0613 1.284C30.9173 1.156 30.8453 0.980002 30.8453 0.756002C30.8453 0.524002 30.9173 0.340002 31.0613 0.204002C31.2133 0.0680015 31.4133 1.43051e-06 31.6613 1.43051e-06C31.9093 1.43051e-06 32.1053 0.0680015 32.2493 0.204002C32.4013 0.340002 32.4773 0.524002 32.4773 0.756002C32.4773 0.972002 32.4013 1.148 32.2493 1.284C32.1053 1.412 31.9093 1.476 31.6613 1.476ZM39.3966 9.288C38.8446 9.288 38.4166 9.144 38.1126 8.856C37.8086 8.56 37.6566 8.144 37.6566 7.608V3.552H35.7846V2.688H37.6566V0.828001H38.6166V2.688H41.2686V3.552H38.6166V7.608C38.6166 8.152 38.8766 8.424 39.3966 8.424H41.1486V9.288H39.3966Z" fill="black" />
                        </svg>

                    </div>
                    <div className="absolute hidden md:block md:left-133 md:-top-45">
                        <svg width="2" height="210" viewBox="0 0 1 118" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M0.1 0.0999985L0.776382 117.111" stroke="black" strokeWidth="0.2" strokeLinecap="round" />
                        </svg>

                    </div>
                    <div className="absolute hidden md:block md:left-133 md:top-115">
                        <svg width="2" height="300" viewBox="0 0 1 118" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M0.1 0.0999985L0.776382 117.111" stroke="black" strokeWidth="0.2" strokeLinecap="round" />
                        </svg>

                    </div>
                </div>

                <div className="flex flex-col items-center">
                    <div className="flex">
                        <div className="text-5xl font-bold mt-6 ml-10 md:mt-0 md:text-8xl md:ml-20">
                            DrawCode
                        </div>
                        <div className="text-5xl pr-3 mt-6 md:mt-0 md:pl-5 md:text-8xl text-amber-400">
                            â†’
                        </div>
                    </div>
                    <div className="flex-2 mb-5 md:pt-3 md:mb-10 md:text-2xl">
                        draw first, code next
                    </div>

                </div>

                {/* // TABLE */}
                <div className="w-72 min-h-68 mb-2 md:h-80 md:mb-0 md:w-100 overflow-clip ">
                    <table className="ml-0 md:h-0 md:ml-0 md:w-100 table-fixed ">
                        <thead className="md:h-7">
                            <tr className="border-b font-bold">
                                <td className="border-r pr-1 text-sm md:text-base md:pr-0 text-center w-5 md:w-10">Id</td>
                                <td className="border-r pl-2 text-sm md:text-base w-50 md:w-50">Problem</td>
                                <td className="text-right md:text-center w-26 text-sm md:text-base md:w-30">Mode</td>
                            </tr>
                        </thead>
                        <tbody >
                            {questionsList.map((obj, i) => {
                                return (
                                    <tr className={`${questionsList.length - 1 === i ? "" : "border-b"}`} key={obj.id}>
                                        <td className="border-r pr-1 text-center">
                                            {
                                                prevNextButtonLoadingRef.current ?
                                                    <span>*</span> :
                                                    <Link to={`/draw-code/${obj.name}`}>{
                                                        Number(searchParams.get("page")) * Number(searchParams.get("limit")) + i
                                                    }</Link>

                                            }
                                        </td>
                                        <td className="border-r px-2">
                                            <Link to={`/draw-code/${obj.name}`}>{obj.name}</Link>
                                        </td>
                                        <td className=" text-right md:text-center">{obj.difficulty}</td>
                                    </tr>
                                )
                            })
                            }

                        </tbody>
                    </table >

                </div>
                <div className="flex justify-center">
                    <button id="prev"
                        onClick={() => {
                            prevNextButtonLoadingRef.current = true;
                            const pageNum = Number(searchParams.get("page"));
                            const limit = searchParams.get("limit") ?? "10";
                            if (pageNum) {
                                const prevPage = pageNum - 1;
                                setSearchParams([["page", prevPage.toString()], ["limit", limit]]);
                            }
                        }}
                        className={`border border-solid px-1.5 py-0 mx-1 my-1 rounded-sm cursor-pointer transition-colors duration-300 ease-out active:scale-100 ${colorVariants["gray"].normal}`}
                    >&lt;</button>

                    <input value={searchParams.get("page") ?? 0} onChange={handleOnChange}
                        className="w-5 text-center border rounded-xl  py-0" />

                    <button id="next"
                        onClick={() => {
                            prevNextButtonLoadingRef.current = true;
                            const nextPage = Number(searchParams.get("page")) + 1;
                            const limit = searchParams.get("limit") ?? "10";
                            setSearchParams([["page", nextPage.toString()], ["limit", limit]]);
                        }}
                        className={`border border-solid px-1.5 py-0 mx-1 my-1 rounded-sm cursor-pointer transition-colors duration-300 ease-out active:scale-100 ${colorVariants["gray"].normal}`}
                    >&gt;</button>
                </div>
                <div >
                    . <br />
                    . <br />
                    . <br />
                </div>
            </div>
        )

    }
}



export default Home;
